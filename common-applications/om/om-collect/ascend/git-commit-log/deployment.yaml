apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: om-collect
  namespace: om
  labels:
    app: om-collect
spec:
  template:
    spec:
      containers:
        - name: om-collect
          volumeMounts:
            - mountPath: /mnt
              subPath: git-commit-log
              name: storage
            - mountPath: /var/lib/om/config.ini
              subPath: credentials_cfg
              name: om-collect-secrets-volume
      volumes:
        - name: om-collect-secrets-volume
          secret:
            secretName: git-commit-log-om-secrets
        - name: storage
          persistentVolumeClaim:
            claimName: git-commit-log
